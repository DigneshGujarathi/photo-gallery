(this["webpackJsonpphoto-gallery"]=this["webpackJsonpphoto-gallery"]||[]).push([[0],{43:function(e,t,a){e.exports=a(74)},73:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),c=a.n(o),l=a(14),s=a(16),u=a(11),i=function(){return r.a.createElement("header",null,r.a.createElement("h1",null,"Photo Gallery"),r.a.createElement("div",{className:"links"},r.a.createElement(s.b,{to:"/",className:"link"},"Home"),r.a.createElement(s.b,{to:"/gallery",className:"link"},"Gallery")))},m=a(13),p=a(75),d=a(77),f=a(17),E=a.n(f),h=a(25),b=a(26),v=a.n(b),g=function(e){return{type:"GET_ERRORS",errors:e}},O=function(e){return{type:"LOAD_PHOTOS",photos:e}},j=Object(l.b)((function(e){return{photos:e.photos||[],errors:e.errors||{}}}))((function(e){var t=e.errors,a=e.dispatch,o=Object(n.useState)(null),c=Object(m.a)(o,2),l=c[0],s=c[1],u=Object(n.useState)("1"),i=Object(m.a)(u,2),f=i[0],b=i[1],O=Object(n.useState)(!1),j=Object(m.a)(O,2),y=j[0],_=j[1],S=Object(n.useState)(null),N=Object(m.a)(S,2),w=N[0],k=N[1];Object(n.useEffect)((function(){k(t)}),[t]),Object(n.useEffect)((function(){k("")}),[]);return r.a.createElement(r.a.Fragment,null,w&&w.upload_error?r.a.createElement("p",{className:"errorMsg centered-message"},w.upload_error):y&&r.a.createElement("p",{className:"successMsg centered-message"},"Photo uploaded successfully."),r.a.createElement(p.a,{onSubmit:function(e){e.preventDefault(),l&&(k(""),a(function(e,t){return function(){var a=Object(h.a)(E.a.mark((function a(n){var r;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,(r=new FormData).append("photo",e),r.append("tag",t),a.next=6,v.a.post("".concat("","/photos"),r,{headers:{"Content-Type":"multipart/form-data"}});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),a.t0.response&&n(g(a.t0.response.data));case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}(l,f)),_(!0))},method:"post",encType:"multipart/form-data",className:"upload-form"},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Choose photo to upload"),r.a.createElement(p.a.Control,{type:"file",name:"photo",onChange:function(e){var t=e.target.files[0];s(t)}})),r.a.createElement(p.a.Group,{controlId:"exampleForm.ControlSelect1"},r.a.createElement(p.a.Label,null,"Tag photo"),r.a.createElement(p.a.Control,{as:"select",custom:!0,onChange:function(e){console.log("event11",e),b(e.target.value)}},r.a.createElement("option",{value:"1"},"Selfi"),r.a.createElement("option",{value:"2"},"Actor"),r.a.createElement("option",{value:"3"},"Actress"),r.a.createElement("option",{value:"4"},"Animal"),r.a.createElement("option",{value:"5"},"Other"))),r.a.createElement(d.a,{variant:"primary",type:"submit",className:"".concat(l?"submit-btn":"disabled submit-btn"),disabled:!l},"Upload")))})),y=function(){return r.a.createElement("div",{className:"home-page"},r.a.createElement(j,null))},_=a(76),S=function(e){var t=e.id;return r.a.createElement(_.a,{className:"photo"},r.a.createElement(_.a.Img,{variant:"top",src:"http://localhost:3300/photos/".concat(t),alt:"Photo"}))},N=Object(l.b)((function(e){return{photos:e.photos||[],errors:e.errors||{}}}))((function(e){var t=e.errors,a=e.photos,o=e.dispatch,c=Object(n.useState)(!1),l=Object(m.a)(c,2),s=l[0],u=l[1];return Object(n.useEffect)((function(){u(!0),o(function(){var e=Object(h.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("".concat("","/photos"));case 3:a=e.sent,t(O(a.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.response&&t(g(e.t0.response.data));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(n.useEffect)((function(){a.length>0&&u(!1)}),[a]),r.a.createElement("div",{className:"photos-list"},t&&t.get_error&&r.a.createElement("p",{className:"errorMsg centered-message"},t.get_error),s?r.a.createElement("div",{className:"loading-msg centered-message"},"Loading..."):a.map((function(e){return r.a.createElement(S,{key:e._id,id:e._id})})))})),w=function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"Page not found"))},k=function(){return r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement(i,null),r.a.createElement("div",{className:"main-content"},r.a.createElement(u.c,null,r.a.createElement(u.a,{component:y,path:"/",exact:!0}),r.a.createElement(u.a,{component:N,path:"/gallery"}),r.a.createElement(u.a,{component:w})))))},x=a(12),T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_PHOTOS":return t.photos;default:return e}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.errors;default:return e}},P=a(41),R=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||x.d,D=Object(x.e)(Object(x.c)({photos:T,errors:C}),R(Object(x.a)(P.a)));D.subscribe((function(){console.log(D.getState())}));var G=D;a(72),a(73);c.a.render(r.a.createElement(l.a,{store:G},r.a.createElement(k,null)),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.40fe5a08.chunk.js.map